# chipmunk4lov 홈페이지

  **Django로 개인 홈페이지 만들기**  
  
  
### 주제 선정

 대학 생활을 하면서 수없이 많은 노트 서비스, 회의 기록 서비스들을 사용했었다. 지금 생각나는 것들만 적어도 에버노트, 네이버 블로그, 구글독스, 트렐로 등등이 있다. 다이어리를 사면 한번도 끝까지 쓴적이 없던 나는 아무리 좋은 서비스가 나와도 하나에 완전히 정착하기가 힘들었다. 물론 교수님들이나 수업마다 팀원들이 선호하는 툴이 달랐던 것도 있고, 트렌드에 따라 더 이상 많이 사용하지 않는 서비스가 된 것(ex. 트렐로, 인디 게임 개발을 할 때 회의 도구로 사용했었다.) 도 하나에 정착할 수 없었던 이유 중의 하나이다. 

 졸업을 앞두고 학교를 다니며 했던 과제들과 프로젝트들을 다시 찾아보면서, 내가 무언가를 했던 기록들을 찾기가 너무 힘들고 찾아도 다른 사람한테 보여주기에는 너무 날 것의 기록들이라는 생각이 들었다. 그래서 1)내 생각을 정리할 수 있으면서 2) 프로젝트도 깔끔하게 보여줄 수 있고 3)깔끔하게 내가 원하는 기능만 넣을 수 있는 '개인홈페이지'를 만들기로 하였다. 

### 사용 기술

- Django (BE)
- Git (버전 관리)
- Bootstrap (FE)
- html/css (FE)
- nginx
- Docker
- AWS (Amazon Lightsail)
- postgresql (처음에 개발할 때는 Django내부의 sqlite를 사용하다가 배포할 때 postgresql로 migrate해주었다)

### 사용 라이브러리

(Django 외 추가기능 구현을 위한 라이브러리)

- markdownx : 포스트에 마크다운 문법을 적용한다.
- allauth : 구글 계정을 연동시켜 내 홈페이지에 로그인할 수 있도록 해준다.
- crispy_forms : 글을 작성할 수 있는 형식을 제공해준다.

### 구현 순서

- 홈페이지는 메인 landing 페이지, 생각을 기록하는 blog 페이지, 프로젝트를 기록하는 project 페이지로 이루어져 있다. 먼저 blog 페이지를 모두 구현하고, project페이지는 blog 페이지를 변형하였다. blog와 project에는 admin페이지를 추가하여 포스트를 관리하기 쉽게 만들었다.

### blog 페이지 구현

1. 먼저 post-list 페이지와 post-detail 페이지를 나눠 구현하였다.
2. navbar과 footer html파일을 분리해서 모듈화해주었다. 
3. comment 섹션을 구현하였다. 대댓글이 가능하게 하고 싶었지만, 일단은 일반 댓글 작성할 수 있도록 만들었다.  개인 이메일이나 구글 이메일로 로그인을 할 수 있게 하여, 로그인한 사람만 댓글을 작성할 수 있도록 하였다. 

### blog 페이지를 변형해 project 페이지 구현

<img width="70%" alt="스크린샷 2021-04-14 오전 4 10 35" src="https://user-images.githubusercontent.com/52595663/114607459-89478700-9cd7-11eb-8e17-cd0f56f69fd5.png">

### Docker에 Django와 postgreSQL 담기

개발 당시 데이터베이스는 Django에서 기본으로 제공하는 sqlite를 사용하였으나, 도커로 옮기면서 데이터베이스를 postgreSQL으로 바꿔주었다. Django파일들과 내가 사용한 라이브러리, postgreSQL 파일 모두 도커로 옮겨주었다. 

### Amazon Lightsail 서버로 도커 옮기기

Amazon lightsail 가상서버에 이 때까지 git에 업로드했던 파일 모두 다시 clone하였다. 다시 도커를 설치하고 git에서 다운받은 파일들을 도커에 담아주었다. 

### 새로 배운 것

- Django의 MTV패턴. 장고의 앱 하나는 template, urls.py, views,py, models.py, 그리고 자체 데이터베이스로 구성되어 있다. 모델로 자료의 형태를 정의하고, 뷰로 어떤 자료를 어떤 동작으로 보여줄지 정의하고, 템플릿으로 웹 페이지에서 출력할 모습을 정의하는 이러한 작동구조를 MTV패턴이라고 부른다. 홈페이지를 만들기 전에는 각각의 기능을 공부해도 잘 와닿지 않았다. 홈페이지를 만들면서 필요한 코드들을 채워나가면서 자연스럽게 각 기능별로 분리해 놓은 이유를 알 수 있었다. 역시 프로그래밍은 직접 해봐야 이해가 빠르다.
- Docker에서 volume을 사용해서 데이터베이스를 유지하는 것
- lightsail의 가상서버에서 도커를 작동시켜도 volume의 경로는 local로 설정이 되어있다.
- Mac os에서 volume은 Docker에 적힌 경로에 실제로 있는 것이 아니다. 왜냐하면 Linux환경과 다르게 Mac os 는 자체적으로 VM을 만든 다음에 Docker 파일들을  관리하기 때문이다.
- Docker에서는 container를 한번에 여러 개 만들 수 있다.


